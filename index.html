<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proceso de Verificación</title>
    <style>
       #timer {
           display: none;
       }
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        #step2, #step3, #qr-section, #loading-section, #success-section {
            display: none;
        }
        #loading-bar {
            width: 0%;
            height: 20px;
            background-color: green;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h2>Verificación de Pagos</h2>
    
    <div id="step1">
        <p>Ingrese el código de verificación:</p>
        <input type="text" id="verification-code" placeholder="Código" maxlength="6">
        <button onclick="checkCode()">Continuar</button>
    </div>

    <div id="step2">
        <p>Ingrese los importes y fecha:</p>
        <input type="text" placeholder="Importe" id="amount"><br><br>
        <input type="date" id="date"><br><br>
        <button onclick="goToStep3()">Continuar</button>
    </div>

    <div id="step3">
        <p>Ingrese los datos de pago:</p>
        <input type="text" placeholder="Número de cuenta" id="account"><br><br>
        <button onclick="showQR()">Continuar</button>
    </div>

    <div id="qr-section">
        <h3>Escanea el siguiente código QR</h3>
        <p>Escanéalo con otro dispositivo para continuar con la validación.</p>
        <img id="qr-code" src="https://backstagenanor.github.io/backstage-qr-access/#" alt="Código QR">
        <p>Una vez escaneado, la verificación procederá.</p>
        <button onclick="startLoading()">Continuar</button>
    </div>

    <div id="loading-section">
        <h3>Procesando verificación...</h3>
        <div id="loading-bar"></div>
        <p>Tiempo estimado: <span id="timer">35:00</span> minutos</p>
    </div>

    <div id="success-section">
        <h3>✅ Trámite realizado con éxito.</h3>
        <p>La verificación ha sido completada. Puedes cerrar esta ventana.</p>
    </div>

    <script>
        function checkCode() {
            let code = document.getElementById("verification-code").value;
            if (code === "927890") {
                document.getElementById("step1").style.display = "none";
                document.getElementById("step2").style.display = "block";
            } else {
                alert("Código incorrecto. Inténtalo de nuevo.");
            }
        }

        function goToStep3() {
            document.getElementById("step2").style.display = "none";
            document.getElementById("step3").style.display = "block";
        }

        function showQR() {
            document.getElementById("step3").style.display = "none";
            document.getElementById("qr-section").style.display = "block";
        }

        function startLoading() {
            document.getElementById("qr-section").style.display = "none";
            document.getElementById("loading-section").style.display = "block";

            let timeLeft = 2100; // 35 minutos en segundos
            let timerElement = document.getElementById("timer");
            let loadingBar = document.getElementById("loading-bar");
            let interval = setInterval(() => {
                timeLeft--;
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                timerElement.textContent = minutes + ":" + (seconds < 10 ? "0" + seconds : seconds);

                loadingBar.style.width = ((2100 - timeLeft) / 2100) * 100 + "%";

                if (timeLeft <= 0) {
                    clearInterval(interval);
                    document.getElementById("loading-section").style.display = "none";
                    document.getElementById("success-section").style.display = "block";
                }
            }, 1000);
        }
    </script>
</body>
</html>
